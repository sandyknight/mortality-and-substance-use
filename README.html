<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Deaths associated with substance use</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Deaths associated with substance use</h1>
<p class="subtitle lead">Premature mortality and life-years lost due to drug and alcohol use</p>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="premature-mortality-and-substance-use" class="level1">
<h1>Premature mortality and substance use</h1>
<ul>
<li>Ask 1: What proportion of premature deaths, given a cutoff point e.g.&nbsp;55, are due to drugs and alcohol.<br>
</li>
<li>Ask 2: Years of life lost (YLL) as a measure of premature mortality <em>NB: ask Chioma for alcohol-specific deaths data by age and maybe LA.</em></li>
<li>Ask 3: Add IMD to all of this - preferably by lower levels check feasibility first</li>
</ul>
<section id="proportion-of-deaths" class="level2">
<h2 class="anchored" data-anchor-id="proportion-of-deaths">1. Proportion of deaths</h2>
<section id="number-of-deaths-associated-with-drug-use" class="level3">
<h3 class="anchored" data-anchor-id="number-of-deaths-associated-with-drug-use">Number of deaths associated with drug use</h3>
<p>The ONS classifies death related to drug poisoning according ICD-10 codes. Certain ICD-10 codes classify a death as a “drug misuse death”<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Each of these requires a specific substance (e.g.&nbsp;heroin) or substance category (e.g.&nbsp;opioids) to be indicated either in the ICD-10 code or on the death certificate.</p>
<p>There are deaths each year where the ONS holds no information on the substance(s) involved[1^]:</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 29%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Year of death registration</th>
<th style="text-align: center;">All drug poisonings</th>
<th style="text-align: center;">Number of deaths without substance information</th>
<th style="text-align: center;">Percentage without substance information</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">2023</td>
<td style="text-align: center;">5,448</td>
<td style="text-align: center;">1,245</td>
<td style="text-align: center;">22.9</td>
</tr>
<tr class="even">
<td style="text-align: center;">2022</td>
<td style="text-align: center;">4,907</td>
<td style="text-align: center;">1,239</td>
<td style="text-align: center;">25.2</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2021</td>
<td style="text-align: center;">4,859</td>
<td style="text-align: center;">1,219</td>
<td style="text-align: center;">25.1</td>
</tr>
<tr class="even">
<td style="text-align: center;">2020</td>
<td style="text-align: center;">4,561</td>
<td style="text-align: center;">1,050</td>
<td style="text-align: center;">23.0</td>
</tr>
</tbody>
</table>
<p>Some of these will be classified as related to drug misuse where an ICD-10 code indicates mental and behavioural disorders due to drug use (excluding alcohol and tobacco) without a specific substance (e.g.&nbsp;F19 “multiple drug use and use of other psychoactive substances”). But others, broadly those coded as accidental/intentional self-poisonings or self-poisonings of unknown intent, will not be classfified as related to drug misuse unless a controlled drug under Misuse of Drugs Act 1971 was mentioned on the death record.</p>
<p>The data linkage between ONS mortality and NDTMS allows some of those deaths to be identified indirectly as related to drug misuse where the person that died had had contact with the drug treatment system within a year of their date of death.</p>
</section>
<section id="explanation-of-data-processing-steps" class="level3">
<h3 class="anchored" data-anchor-id="explanation-of-data-processing-steps">Explanation of Data Processing Steps</h3>
<p>Take drug poisoning deaths from ONS-NDTMS data linkage dataset provided by EAT (~300k rows) and deaths in treatment data (~30k rows) and aggregate them into one summary dataset at national level.</p>
<hr>
</section>
<section id="step-1-process-the-drug-poisoning-deaths-data" class="level3">
<h3 class="anchored" data-anchor-id="step-1-process-the-drug-poisoning-deaths-data"><strong>Step 1: Process the Drug Poisoning Deaths Data</strong></h3>
<ol type="1">
<li><p><strong>Filter the data</strong>:</p>
<ul>
<li>Only includes deaths from the year <strong>2022</strong>.</li>
<li>Focuses on deaths recorded as “Total Deaths” (not broken down by substance).</li>
<li>Keeps only cases flagged as drug misuse (or cases with no record of contact with the treatment system if they are not flagged as misuse).</li>
</ul></li>
</ol>
<p>Where cases are <strong>not</strong> flagged as drug misuse but there <strong>is</strong> a record of contact with the treatment system those deaths are assigned the label “additional poisoning deaths”:</p>
<pre><code>::: {.cell}

:::</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="plots/additional_deaths_2x2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Identifying addtional poisonings</figcaption><p></p>
</figure>
</div>
<ol start="2" type="1">
<li><p><strong>Adds meaningful labels</strong>:</p>
<ul>
<li>Labels deaths as either:
<ul>
<li><strong>“Initial poisoning deaths”</strong>: Cases recorded as drug misuse.</li>
<li><strong>“Additional poisoning deaths”</strong>: Cases not flagged as misuse but with no treatment system record.</li>
</ul></li>
</ul></li>
<li><p><strong>Groups and counts the data</strong>:</p>
<ul>
<li>Groups deaths by any specified categories (e.g., by region or age group). In this case, no additional grouping is applied.</li>
<li>Calculates the number of deaths in each category.</li>
</ul></li>
</ol>
<p>This results in a summary dataset where each row represents a specific combination of grouping variables (e.g., year, death category), with a count of deaths for that combination.</p>
<hr>
</section>
<section id="step-2-process-the-deaths-in-treatment-data" class="level3">
<h3 class="anchored" data-anchor-id="step-2-process-the-deaths-in-treatment-data"><strong>Step 2: Process the Deaths in Treatment Data</strong></h3>
<p>The function <code>process_deaths_in_treatment</code> processes data about individuals who died during or after receiving treatment for substance abuse (file path: <code>deaths_in_treatment_file</code>). Here’s what it does: 1. <strong>Filters the data</strong>: - Only includes records from <strong>2022</strong>. - Exclude alcohol-specific deaths</p>
<ol start="2" type="1">
<li><strong>Groups the data</strong>:
<ul>
<li>Groups deaths by:
<ul>
<li><strong>Year</strong> (2022).</li>
<li><strong>Treatment status</strong>: Whether the person was still in treatment or had been discharged (e.g., died within a year after leaving treatment).</li>
</ul></li>
</ul></li>
<li><strong>Counts the data</strong>:
<ul>
<li>Summarises the number of deaths in each group.</li>
</ul></li>
</ol>
<p>This creates a summarised dataset where each row represents a combination of year and category of death, with the total number of deaths for that group.</p>
<hr>
</section>
<section id="step-3-combine-the-two-processed-datasets" class="level3">
<h3 class="anchored" data-anchor-id="step-3-combine-the-two-processed-datasets"><strong>Step 3: Combine the Two Processed Datasets</strong></h3>
<p>The function <code>combine_national_data</code> merges the two processed datasets: 1. <strong>Aligns the data</strong>: - Standardises the naming. e.g: - Drug poisoning deaths are categorised as <strong>“Initial poisoning deaths”</strong> or <strong>“Additional poisoning deaths”</strong>. - Treatment-related deaths are categorised by treatment status (e.g., “Died in treatment”).</p>
<ol start="2" type="1">
<li><strong>Combines the data</strong>:
<ul>
<li>Stacks the rows from the two datasets together, creating a single dataset.</li>
<li>At this point the categories of deaths are mutually exclusive, so rather than merging the data we can just stack the rows.</li>
</ul></li>
</ol>
<hr>
</section>
<section id="step-4-relabel-death-categories" class="level3">
<h3 class="anchored" data-anchor-id="step-4-relabel-death-categories"><strong>Step 4: Relabel Death Categories</strong></h3>
<p>The function <code>relabel_national_data</code> refines the death category labels in the combined dataset: 1. <strong>Adds more descriptive labels for plots</strong> : - Initial poisoning deaths - Additional poisoning deaths - Non-poisoning deaths: Died in treatment - Non-poisoning deaths: Died within a year of discharge - Non-poisoning deaths: Died one or more years following discharge</p>
<hr>
</section>
<section id="final-dataset-national_data" class="level3">
<h3 class="anchored" data-anchor-id="final-dataset-national_data"><strong>Final Dataset (<code>national_data</code>)</strong></h3>
<p>After these steps, the <code>national_data</code> dataset is an aggregated summary:: - Each row represents a unique combination of: - <strong>Year</strong>: Always 2022 in this example. - <strong>Death Category</strong>: E.g., “Initial poisoning deaths,” “Non-poisoning deaths: Died in treatment.” - Each row includes a <strong>count</strong> of deaths for that category.</p>
</section>
</section>
<section id="this-is-the-first-four-rows-of-table-11-in-the-same-release." class="level2">
<h2 class="anchored" data-anchor-id="this-is-the-first-four-rows-of-table-11-in-the-same-release."><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>: This is the first four rows of <code>Table 11</code> in the same release.</h2>
</section>
<section id="years-of-life-lost-due-to-substance-use" class="level2">
<h2 class="anchored" data-anchor-id="years-of-life-lost-due-to-substance-use">2. Years of life lost due to substance use</h2>
<p>Years of life lost (YLL) is a measure of the impact of premature mortality, helpfully defined by Public Health England <a href="https://fingertips.phe.org.uk/static-reports/health-profile-for-england/definitions-regional.html#years-of-life-lost-yll">here</a></p>
<p>Chudasama et al.&nbsp;(2022) investigated five methods for estimating YLL<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. The first two methods are feasible with the available data for YLL from drug use and alcohol specific deaths. Only the drug-related YLL could be segmented by geographical estimates of deprivation.</p>
<p>All five methods are detailed in the supplementary PDF <a href="https://ars.els-cdn.com/content/image/1-s2.0-S0895435622001639-mmc1.pdf">here</a>.</p>
<section id="mortality-data" class="level3">
<h3 class="anchored" data-anchor-id="mortality-data">Mortality data</h3>
<ul>
<li>Deaths related to drug misuse as defined by the ONS<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</li>
<li>Additional drugs related to drugs misuse that the ONS had insufficient data to classify, but can be inferred from the data linkage of ONS data with NDTMS data by <a href="https://www.gov.uk/government/publications/ministry-of-justice-better-outcomes-through-linked-data-bold">Better Outcomes through Linked data (BOLD)</a> <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>.</li>
<li>Alcohol specific deaths</li>
</ul>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Chudasama, Y.V., Khunti, K., Gillies, C.L., Dhalwani, N.N., Davies, M.J., Yates, T., &amp; Zaccardi, F. (2022). Estimates of years of life lost depended on the method used: tutorial and comparative investigation. Journal of Clinical Epidemiology, 150, pp.&nbsp;42-50. Available at: <a href="https://doi.org/10.1016/j.jclinepi.2022.06.012" class="uri">https://doi.org/10.1016/j.jclinepi.2022.06.012</a> [Accessed 6 Nov.&nbsp;2024].<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Chudasama, Y.V., Khunti, K., Gillies, C.L., Dhalwani, N.N., Davies, M.J., Yates, T., &amp; Zaccardi, F. (2022). Estimates of years of life lost depended on the method used: tutorial and comparative investigation. Journal of Clinical Epidemiology, 150, pp.&nbsp;42-50. Available at: <a href="https://doi.org/10.1016/j.jclinepi.2022.06.012" class="uri">https://doi.org/10.1016/j.jclinepi.2022.06.012</a> [Accessed 6 Nov.&nbsp;2024].<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Chudasama, Y.V., Khunti, K., Gillies, C.L., Dhalwani, N.N., Davies, M.J., Yates, T., &amp; Zaccardi, F. (2022). Estimates of years of life lost depended on the method used: tutorial and comparative investigation. Journal of Clinical Epidemiology, 150, pp.&nbsp;42-50. Available at: <a href="https://doi.org/10.1016/j.jclinepi.2022.06.012" class="uri">https://doi.org/10.1016/j.jclinepi.2022.06.012</a> [Accessed 6 Nov.&nbsp;2024].<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><em>Not publicly available</em><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><em>Not publicly available</em><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>